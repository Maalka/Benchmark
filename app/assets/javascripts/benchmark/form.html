<div>
    <form class="ui form" novalidate ng-class="{'error': !forms.baselineForm.$valid && forms.hasValidated}" name="forms.baselineForm" ng-cloak>
        <div class="ui error message" ng-if="!forms.baselineForm.$valid && forms.hasValidated">
            <div class="header">
                There were some errors with your submission
            </div>
            <ul class="list">
                <li>Make sure you have filled out all of the required fields</li>
                <li>Please note that commas are not allowed in the numeric fields</li>
            </ul>
        </div>
        <h3 class="ui header">
            <i class="globe icon"></i>ABOUT YOUR BUILDING
        </h3>

        <div class="entry">
            <div class="ui segment about">
                <div class="ui grid">
                    <div class="five wide column">
                        <label class="design-label">Building Name</label>
                    </div>
                    <div class="eleven wide column">
                        <div class="inline fields">
                            <div class="fifteen wide field">
                                <input type="text" ng-model="auxModel.buildingName"
                                       name="buildingName" min="0" placeholder="Building Name">
                            </div>
                        </div>
                    </div>
                    <div class="five wide column">
                        <label class="design-label">Country</label>
                    </div>
                    <div class="eleven wide column">
                        <div class="inline fields">
                            <div class="sixteen wide field required">
                                <select class="ui dropdown search"
                                        ng-model="auxModel.country"
                                        ng-options="item.id as item.name for item in geographicProperties.country"
                                        required
                                        name="country">
                                        <option value="">Select</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="five wide column">
                        <label class="design-label">City | State/Prov.</label>
                    </div>
                    <div class="eleven wide column">
                        <div class="inline fields required">
                            <div class="nine wide field">
                                <input type="text" ng-model="auxModel.city"
                                     required name="city" placeholder="City">
                            </div>
                            <div class="seven wide field">
                                <select class="ui dropdown search"
                                    ng-model="auxModel.state"
                                    ng-options="item.id as item.name for item in geographicProperties.state | filter: {filter_id: auxModel.country}"
                                    required
                                    name="state">
                                    <option value="">Select</option>
                                </select>
                            </div>
                        </div>
                    </div>
                    <div class="five wide column">
                        <label class="design-label">Postal Code</label>
                    </div>
                    <div class="eleven wide column">
                        <div class="inline fields">
                            <div class="sixteen wide field required">
                                <input type="text" ng-model="auxModel.postalCode" ng-blur="postalCodeCheck()"
                                     required name="postalCode" placeholder="Postal Code">
                            </div>
                        </div>
                    </div>
                    <div class="five wide column" ng-show="lacksDD">
                        <div class="tooltip">Degree Days
                            <i class="large circle help icon"></i>
                            <span class="tooltiptext">No Degree Days found for your ZipCode!
                                <a href="https://portfoliomanager.energystar.gov/pm/degreeDaysCalculator" target="_blank">Click Here</a>
                            </span>
                        </div>
                    </div>
                    <div class="eleven wide column" ng-show="lacksDD">
                        <div class="inline fields">
                            <div class="two wide field">
                                <label>HDD</label>
                            </div>
                            <div class="five wide field required">
                                <input type="number" ng-model="auxModel.HDD"
                                       required name="HDD" min="0" placeholder="HDD">
                            </div>
                            <div class="two wide field">
                                <label>CDD</label>
                            </div>                    
                            <div class="four wide field required">
                                <input type="number" ng-model="auxModel.CDD"
                               required name="CDD" min="0">
                            </div>
                        </div>
                    </div>
                </div>
                <div class="sixteen wide column">
                    <div class="ui divider"></div>
                </div>
                <div class="inline fields">
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" id="project-cb-new" ng-model="auxModel.newConstruction" ng-init="auxModel.newConstruction=false"
                               ng-value='true'>
                            <label for='project-cb-new'>New construction</label>
                        </div>
                    </div>
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" id="project-cb-existing" ng-model="auxModel.newConstruction" ng-init="auxModel.newConstruction=false"
                               ng-value='false'>
                            <label for="project-cb-existing">Existing Building</label>
                        </div>
                    </div>
                </div>

            </div>
            <h3 class="ui header"><i class="building icon"></i>BUILDING USE DETAILS</h3>
            <div class="ui segment page-break-after" ng-class="{'disabled': !forms.baselineForm.country.$valid}">

                <div class="field">
                    In order to provide you with an appropriate comparison
                    for your building, we need to know how spaces in this
                    building will be used. If your building has multiple uses,
                    add them below.

                    <div class="tooltip">
                        <sup><i class="blue circle info icon"></i></sup>
                        <span class="tooltiptext">The total area of all space uses should equal the gross floor area of the building. For a description of each use type and associated space use characteristic inputs, refer to the <a href="https://portfoliomanager.energystar.gov/pm/glossary" target="_blank">ENERGY STAR Portfolio Manager Glossary</a>.</span>
                    </div>
                </div>

                <div class="inline fields">
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" id="project-commercial" ng-model="auxModel.buildingZone" ng-init="auxModel.buildingZone='commercial'"
                                   ng-value="'commercial'">
                            <label for='project-commercial'>Commercial</label>

                        </div>
                    </div>
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" id="project-residential" ng-model="auxModel.buildingZone" ng-init="auxModel.buildingZone='commercial'"
                                   ng-value="'residential'">
                            <label for="project-residential">Residential</label>

                        </div>
                    </div>
                </div>
                <div class="inline fields" ng-if="!(propTypes.length > 0 && propTypes[0].buildingZone === 'residential' && auxModel.buildingZone == 'residential')">
                    <div class="sixteen wide field">
                        <label>{{propText}}</label>
                        <select class="ui dropdown search"
                                dropdown
                                reset = "auxModel.resetBuildingType"
                                ng-model="auxModel.buildingType"
                                ng-options="item as item.name for item in buildingProperties.buildingType[auxModel.buildingZone] | orderBy : 'name'"
                                name="buildingType">
                            <option value="">Select</option>
                        </select>
                    </div>
                </div>
                <div ng-if="propTypes.length > 0">
                    <div class="ui divider "></div>
                    <div class="field">
                        <label >Selected Use Types(s):</label>
                    </div>
                </div>
                <div class="field" ng-repeat="prop in propTypes">
                    <h3 class="ui header">{{prop.name}}</h3>
                </div>
            </div>
            <div ng-repeat="prop in propTypes" ng-class="{'page-break-after': ($index + 1) % 3 == 0}">
                <div class="ui segment building">
                    <div ng-if="prop.type=='DataCenter' && prop.country=='USA'" building-Info forms='forms' type='DataCenter' model="prop"></div>
                    <div ng-if="prop.type=='Hospital' && prop.country=='USA'" building-Info forms='forms' type='Hospital' model="prop"></div>
                    <div ng-if="prop.type=='Hotel' && prop.country=='USA'" building-Info forms='forms' type='Hotel' model="prop"></div>
                    <div ng-if="prop.type=='K12School' && prop.country=='USA'" building-Info forms='forms' type='K12School' model="prop"></div>
                    <div ng-if="prop.type=='MedicalOffice' && prop.country=='USA'" building-Info forms='forms' type='MedicalOffice' model="prop"></div>
                    <div ng-if="prop.type=='Office' && prop.country=='USA'" building-Info forms='forms' type='Office' model="prop"></div>
                    <div ng-if="prop.type=='ResidenceHall' && prop.country=='USA'" building-Info forms='forms' type='ResidenceHall' model="prop"></div>
                    <div ng-if="prop.type=='Retail' && prop.country=='USA'" building-Info forms='forms' type='Retail' model="prop"></div>
                    <div ng-if="prop.type=='SeniorCare' && prop.country=='USA'" building-Info forms='forms' type='SeniorCare' model="prop"></div>
                    <div ng-if="prop.type=='Supermarket' && prop.country=='USA'" building-Info forms='forms' type='Supermarket' model="prop"></div>
                    <div ng-if="prop.type=='Warehouse' && prop.country=='USA'" building-Info forms='forms' type='Warehouse' model="prop"></div>
                    <div ng-if="prop.type=='RefrigeratedWarehouse' && prop.country=='USA'" building-Info forms='forms' type='RefrigeratedWarehouse' model="prop"></div>
                    <div ng-if="prop.type=='WastewaterCenter' && prop.country=='USA'" building-Info forms='forms' type='WastewaterCenter' model="prop"></div>
                    <div ng-if="prop.type=='WorshipCenter' && prop.country=='USA'" building-Info forms='forms' type='WorshipCenter' model="prop"></div>
                    <div ng-if="prop.type=='MultiFamily' && prop.country=='USA'" building-Info forms='forms' type='MultiFamily' model="prop"></div>

                    <div ng-if="prop.type=='Hospital' && prop.country=='Canada'" building-Info forms='forms' type='HospitalCanada' model="prop"></div>
                    <div ng-if="prop.type=='K12School' && prop.country=='Canada'" building-Info forms='forms' type='K12SchoolCanada' model="prop"></div>
                    <div ng-if="prop.type=='MedicalOffice' && prop.country=='Canada'" building-Info forms='forms' type='MedicalOfficeCanada' model="prop"></div>
                    <div ng-if="prop.type=='Office' && prop.country=='Canada'" building-Info forms='forms' type='OfficeCanada' model="prop"></div>
                    <div ng-if="prop.type=='Supermarket' && prop.country=='Canada'" building-Info forms='forms' type='SupermarketCanada' model="prop"></div>

                    <div ng-if="prop.country=='USA' && prop.type!='DataCenter' && prop.type!='Hospital' &&
                        prop.type!='Hotel' && prop.type!='K12School' && prop.type!='MedicalOffice' &&
                        prop.type!='Office' && prop.type!='ResidenceHall' && prop.type!='Retail' &&
                        prop.type!='SeniorCare' && prop.type!='Supermarket' && prop.type!='RefrigeratedWarehouse' && prop.type!='Warehouse' &&
                        prop.type!='WastewaterCenter' && prop.type!='MultiFamily' &&
                        prop.type!='WorshipCenter'" building-Info forms='forms' type='Generic' model="prop">
                    </div>
                    <div ng-if="prop.country=='Canada' && prop.type!='Hospital' && prop.type!='K12School' &&
                        prop.type!='MedicalOffice' && prop.type!='Office' && prop.type!='Supermarket'" building-Info forms='forms' type='Generic' model="prop">
                    </div>

                </div>

            </div>
            <h3 class="ui header"><i class="bullseye icon"></i>Energy Reduction Target</h3>
            <div class="ui segment reduction page-break-after">

                <div class="field">
                    Enter your target expressed as either a percent
                    reduction from baseline EUI, or as a Zero Score. A
                    baseline represents a typical modern building.
                    <div class="tooltip">
                        <sup><i class="blue circle info icon"></i></sup>
                        <span class="tooltiptext">A typical modern building represents an energy consumption profile that is based on data from the 2003 Commercial Building Energy Consumption Survey (CBECS) or the 2001 Residential Energy Consumption Survey (RECS). Baselines are normalized by climate, weather, space type, building size, occupancy, and schedule.</span>
                    </div>
                </div>

                <div class="inline fields">
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" id="project-percentReduction" ng-model="auxModel.targetToggle" ng-init="auxModel.targetToggle='percentReduction'"
                                   ng-value="'percentReduction'">
                            <label for='project-percentReduction'>Percent Reduction
                                <div class="tooltip">
                                    <sup><i class="blue circle info icon"></i></sup>
                                    <span class="tooltiptext">
                                        2030 Challenge reduction targets for new construction and major renovations<sup>*</sup> are:
                                        <ul>
                                            <li>70% today</li>
                                            <li>80% in 2020</li>
                                            <li>90% in 2025</li>
                                            <li>Carbon-neutral in 2030 (using no fossil fuel GHG emitting energy to operate)</li>
                                        </ul>
                                        2030 Challenge reduction targets for existing buildings are:
                                        <ul>
                                            <li>20% today</li>
                                            <li>35% in 2025</li>
                                            <li>50% in 2030</li>
                                        </ul>
                                        <sup>*</sup>A Major Renovation is any renovation of a building where (a) the total cost of the renovation related to the building envelope or the technical building systems is higher than 25 % of the value of the building, excluding the value of the land upon which the building is situated, or (b) more than 25 % of the surface of the building envelope undergoes renovation.
                                    </span>
                                </div>
                            </label>

                        </div>
                    </div>
                    <div class="field">
                        <div class="ui radio checkbox">
                            <input type="radio" id="project-zeroScore" ng-model="auxModel.targetToggle" ng-init="auxModel.targetToggle='percentReduction'"
                                   ng-value="'zeroScore'">
                            <label for="project-zeroScore">Zero Score
                                <div class="tooltip">
                                    <sup><i class="blue circle info icon"></i></sup>
                                    <span class="tooltiptext">A Zero Score is calculated on a linear scale, where a score of 100 represents the 2030 Challenge baseline (a typical modern building) and a score of 0 represents a zero net carbon building. Zero Scores are equivalent to the inverse of the Percent Reduction value.</span>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="inline fields" ng-if="auxModel.targetToggle==='percentReduction'">
                    <div class="one wide field"></div>
                    <div class="four wide required field">
                        <div class="ui input">
                            <input type="number" ng-model="auxModel.percentBetterThanMedian"
                                   name="percentBetterThanMedian" placeholder="Target"
                                   min="0" max="130">
                        </div>
                    </div>
                    <div class="field">
                        <label ng-show="!forms.baselineForm.percentBetterThanMedian.$valid"><font color="red">[Must Be Number Between 0-100]</font></label>
                    </div>
                </div>
                <div class="inline fields" ng-if="auxModel.targetToggle==='zeroScore'">
                    <div class="seven wide field"></div>
                    <div class="four wide required field">
                        <div class="ui input">
                            <input type="number" ng-model="auxModel.percentBetterThanMedian"
                                   name="percentBetterThanMedian" placeholder="Target"
                                   min="0" max="130">
                        </div>
                    </div>
                    <div class="field">
                        <label ng-show="!forms.baselineForm.percentBetterThanMedian.$valid"><font color="red">[Must Be Number Between 0-100]</font></label>
                    </div>
                </div>
                <div ng-if="auxModel.targetToggle==='percentReduction'">
                    <div class="sixteen wide column">
                        <div class="ui divider"></div>
                    </div>
                    <div class="ui fifteen wide column left aligned">
                        <div checkbox class="ui checkbox checked" style="margin-top:.2em;margin-bottom:1em;">
                            <input type="checkbox" id="is2030" ng-model="auxModel.is2030" ng-init="auxModel.is2030=false"
                                   ng-true-value=true ng-false-value=false>
                            <label for="is2030">Are you using the Zero Tool to meet 2030 Challenge Targets?</label>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="ui header" ng-if="auxModel.newConstruction === false"><i class="lightning icon"></i>Annual Energy Consumption</h3>
            <div class="ui segment energy-entry" ng-if="auxModel.newConstruction === false">
                <div class="field">
                    Enter the annual energy consumption for the building
                    below. Include all fossil fuel-based energy that is
                    sourced from off-site, either through a direct
                    connection to a utility or through transportation to the
                    site.
                <div class="tooltip">
                    <sup><i class="blue circle info icon"></i></sup>
                    <span class="tooltiptext">For the purposes of this calculation, all utility-provided energy consumption data should be considered fossil fuel-based, unless a project-specific contract for green power procurement is in place.</span>
                </div>
            </div>
                </p>
                <div>
                    <div class="ui grid">
                        <div class="ui fifteen wide column left aligned">
                            <div checkbox class="ui checkbox checked" style="margin-top:.2em;margin-bottom:1em;">
                                <input type="checkbox" id="netMetered" ng-model="auxModel.netMetered" ng-init="auxModel.netMetered=false"
                                       ng-true-value=true ng-false-value=false>
                                <label for="netMetered">Net Metered?
                                    <div class="tooltip">
                                        <sup><i class="blue circle info icon"></i></sup>
                                        <span class="tooltiptext">Check this box if your utility bills aggregate on-site energy consumption and on-
                                            site energy generation. Leave the box unchecked if you have separate consumption and generation data. Either way, enter energy generation data below.</span>
                                    </div>
                                </label>
                            </div>
                        </div>
                        <div class="five wide column">
                            Energy Type
                        </div>
                        <div class="five wide column">
                            Units
                        </div>
                        <div class="five wide column">
                            Total Annual<br />
                            Energy Use
                        </div>
                        <div ng-repeat-start="energyEntry in energies" class="five wide column">
                            <div class="field">
                                 <select class="ui dropdown"
                                    ng-model="energyEntry.energyType"
                                    ng-options="item as item.name for item in energyProperties.energyType track by item.name">
                                    <option value="">Select</option>
                                </select>
                            </div>
                        </div>
                        <div class="five wide column">
                            <div class="field">
                                 <select class="ui dropdown"
                                    ng-model="energyEntry.energyUnits"
                                    ng-options="item.id as item.name for item in energyProperties.energyUnits | filter: {filter_id: energyEntry.energyType.id}">
                                    <option value="">Select</option>
                                </select>
                            </div>
                        </div>
                        <div class="five wide column">
                            <div class="ui input">
                                <input type="number" ng-model="energyEntry.energyUse" value ="{{energyEntry.energyUse}}">
                            </div>
                        </div>
                        <div ng-repeat-end class="one wide column">
                            <div class="ui large labeled button" 
                                ng-click="removeRow($index)" 
                                style="margin-top:.4em;">
                                <i class="minus red circle icon"></i>
                            </div>
                        </div>

                        <div class="ui fifteen wide column right aligned">
                           <label class="design-label">add another entry</label>
                        </div>
                        <div class="one wide column">
                            <div class="ui large labeled button" ng-click="addEnergiesRow()" style="margin-top:.4em;">
                                <i class="add green circle icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <h3 class="ui header" ng-if="auxModel.newConstruction === false"><i class="fa fa-sun-o icon" aria-hidden="true">
                </i>Annual Energy Generation</h3>
            <div class="ui segment energy-entry" ng-if="auxModel.newConstruction === false">
                <p>
                    Enter the annual energy generation for your building
                    below. Include all non fossil fuel-based renewable
                    energy that is either generated on site or procured
                    from certified green power providers.
                </p>

                <div>
                    <div class="ui grid">
                        <div class="five wide column">
                            Energy Type
                        </div>
                        <div class="five wide column">
                            Units
                        </div>
                        <div class="five wide column">
                            Total Annual<br />
                            Energy Use
                        </div>
                        <div ng-repeat-start="energyEntry in renewableEnergies" class="five wide column">
                            <div class="field">
                                <select class="ui dropdown"
                                        ng-model="energyEntry.renewableType"
                                        ng-options="item as item.name for item in energyProperties.renewableType track by item.name">
                                    <option value="">Select</option>
                                </select>
                            </div>
                        </div>
                        <div class="five wide column">
                            <div class="field">
                                <select class="ui dropdown"
                                        ng-model="energyEntry.renewableUnits"
                                        ng-options="item.id as item.name for item in energyProperties.renewableUnits | filter: {filter_id: grid}">
                                    <option value="">Select</option>
                                </select>
                            </div>
                        </div>
                        <div class="five wide column">
                            <div class="ui input">
                                <input type="number" ng-model="energyEntry.energyUse" value ="{{energyEntry.energyUse}}">
                            </div>
                        </div>
                        <div ng-repeat-end class="one wide column">
                            <div class="ui large labeled button"
                                 ng-click="removeRenewableRow($index)"
                                 style="margin-top:.4em;">
                                <i class="minus red circle icon"></i>
                            </div>
                        </div>
                        <div class="ui fifteen wide column right aligned">
                            <label class="design-label">add another entry</label>
                        </div>
                        <div class="one wide column">
                            <div class="ui large labeled button" ng-click="addRenewableEnergiesRow()" style="margin-top:.4em;">
                                <i class="add green circle icon"></i>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </form>
</div>